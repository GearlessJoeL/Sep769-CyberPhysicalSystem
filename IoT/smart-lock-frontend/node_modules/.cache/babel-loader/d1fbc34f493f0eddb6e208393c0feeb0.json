{"ast":null,"code":"import React, { useContext } from 'react';\nimport invariant from 'ts-invariant';\nvar PubNubContext = /*#__PURE__*/React.createContext(null);\nfunction appendPnsdk(pubnub) {\n  if (typeof pubnub._addPnsdkSuffix === 'function') {\n    pubnub._addPnsdkSuffix('react', 'React/3.0.2');\n  }\n}\nvar PubNubProvider = function PubNubProvider(_ref) {\n  var client = _ref.client,\n    children = _ref.children;\n  var contextValue = React.useMemo(function () {\n    return {\n      client: client\n    };\n  }, [client]);\n  !contextValue.client ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'PubNubProvider was not passed a client instance. Make ' + 'sure you pass in your client via the \"client\" prop.') : invariant(false) : void 0;\n  React.useEffect(function () {\n    appendPnsdk(contextValue.client);\n  }, []);\n  return React.createElement(PubNubContext.Provider, {\n    value: contextValue\n  }, children);\n};\nvar PubNubConsumer = function PubNubConsumer(_ref) {\n  var children = _ref.children;\n  var context = React.useContext(PubNubContext);\n  !(context && context.client) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find \"client\" in the context of PubNubConsumer. ' + 'Wrap the root component in an <PubNubProvider>.') : invariant(false) : void 0;\n  return React.createElement(React.Fragment, null, children(context.client));\n};\nfunction usePubNub() {\n  var context = useContext(PubNubContext);\n  !(context && context.client) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'No PubNub Client instance can be found. Please ensure that you ' + 'have called `PubNubProvider` higher up in your tree.') : invariant(false) : void 0;\n  return context.client;\n}\nexport { PubNubConsumer, PubNubProvider, usePubNub };","map":{"version":3,"names":["PubNubContext","React","createContext","appendPnsdk","pubnub","_addPnsdkSuffix","PubNubProvider","_ref","client","children","contextValue","useMemo","process","env","NODE_ENV","invariant","useEffect","createElement","Provider","value","PubNubConsumer","context","useContext","Fragment","usePubNub"],"sources":["../src/context/PubNubContext.tsx","../src/context/PubNubProvider.tsx","../src/context/PubNubConsumer.tsx","../src/hooks/usePubNub.ts"],"sourcesContent":["import React from 'react';\nimport PubNub from 'pubnub';\n\nexport interface PubNubContextValue {\n  client: PubNub;\n}\n\nexport const PubNubContext = React.createContext<PubNubContextValue | null>(\n  null\n);\n","import React from 'react';\nimport PubNub from 'pubnub';\nimport invariant from 'ts-invariant';\n\nimport { PubNubContext } from './PubNubContext';\n\nexport interface PubNubProviderProps<PubNubInstance> {\n  client: PubNubInstance;\n  children: React.ReactNode | React.ReactNode[] | null;\n}\n\nfunction appendPnsdk(pubnub: any) {\n  if (typeof pubnub._addPnsdkSuffix === 'function') {\n    pubnub._addPnsdkSuffix('react', 'React/__VERSION__');\n  }\n}\n\nexport const PubNubProvider: React.FC<PubNubProviderProps<PubNub>> = ({\n  client,\n  children,\n}) => {\n  const contextValue = React.useMemo(() => {\n    return { client };\n  }, [client]);\n\n  invariant(\n    contextValue.client,\n    'PubNubProvider was not passed a client instance. Make ' +\n      'sure you pass in your client via the \"client\" prop.'\n  );\n\n  React.useEffect(() => {\n    appendPnsdk(contextValue.client);\n  }, []);\n\n  return (\n    <PubNubContext.Provider value={contextValue}>\n      {children}\n    </PubNubContext.Provider>\n  );\n};\n","import React from 'react';\nimport PubNub from 'pubnub';\nimport invariant from 'ts-invariant';\n\nimport { PubNubContext } from './PubNubContext';\n\nexport interface PubNubConsumerProps {\n  children: (client: PubNub) => React.ReactChild | null;\n}\n\nexport const PubNubConsumer: React.FC<PubNubConsumerProps> = ({ children }) => {\n  const context = React.useContext(PubNubContext);\n\n  invariant(\n    context && context.client,\n    'Could not find \"client\" in the context of PubNubConsumer. ' +\n      'Wrap the root component in an <PubNubProvider>.'\n  );\n\n  return <>{children(context!.client)}</>;\n};\n","import { useContext } from 'react';\nimport PubNub from 'pubnub';\nimport invariant from 'ts-invariant';\n\nimport { PubNubContext } from '../context/PubNubContext';\n\nexport function usePubNub(): PubNub {\n  const context = useContext(PubNubContext);\n\n  invariant(\n    context && context.client,\n    'No PubNub Client instance can be found. Please ensure that you ' +\n      'have called `PubNubProvider` higher up in your tree.'\n  );\n\n  return context!.client;\n}\n"],"mappings":";;AAOO,IAAMA,aAAa,gBAAGC,KAAK,CAACC,aAAN,CAC3B,IAD2B,CAAtB;ACIP,SAASC,WAATA,CAAqBC,MAArB;EACE,IAAI,OAAOA,MAAM,CAACC,eAAd,KAAkC,UAAtC,EAAkD;IAChDD,MAAM,CAACC,eAAP,CAAuB,OAAvB,EAAgC,aAAhC;EACD;AACF;AAED,IAAaC,cAAc,GAA0C,SAAxDA,cAAwDA,CAAAC,IAAA;MACnEC,MAAA,GAAAD,IAAA,CAAAC,MAAA;IACAC,QAAA,GAAAF,IAAA,CAAAE,QAAA;EAEA,IAAMC,YAAY,GAAGT,KAAK,CAACU,OAAN,CAAc;IACjC,OAAO;MAAEH,MAAM,EAANA;IAAF,CAAP;EACD,CAFoB,EAElB,CAACA,MAAD,CAFkB,CAArB;EAIA,CACEE,YAAY,CAACF,MADf,GAAAI,OAAA,CAAAC,GAAA,CAAAC,QAAA,oBAAAC,SAAS,QAEP,2DACE,qDAHK,CAAT,GAAAA,SAAS,OAAT;EAMAd,KAAK,CAACe,SAAN,CAAgB;IACdb,WAAW,CAACO,YAAY,CAACF,MAAd,CAAX;EACD,CAFD,EAEG,EAFH;EAIA,OACEP,KAAA,CAAAgB,aAAA,CAACjB,aAAa,CAACkB,QAAf;IAAwBC,KAAK,EAAET;GAA/B,EACGD,QADH,CADF;AAKD,CAvBM;ICPMW,cAAc,GAAkC,SAAhDA,cAAgDA,CAAAb,IAAA;MAAGE,QAAA,GAAAF,IAAA,CAAAE,QAAA;EAC9D,IAAMY,OAAO,GAAGpB,KAAK,CAACqB,UAAN,CAAiBtB,aAAjB,CAAhB;EAEA,EACEqB,OAAO,IAAIA,OAAO,CAACb,MADrB,IAAAI,OAAA,CAAAC,GAAA,CAAAC,QAAA,oBAAAC,SAAS,QAEP,+DACE,iDAHK,CAAT,GAAAA,SAAS,OAAT;EAMA,OAAOd,KAAA,CAAAgB,aAAA,CAAAhB,KAAA,CAAAsB,QAAA,QAAGd,QAAQ,CAACY,OAAQ,CAACb,MAAV,CAAX,CAAP;AACD,CAVM;SCJSgB,UAAA;EACd,IAAMH,OAAO,GAAGC,UAAU,CAACtB,aAAD,CAA1B;EAEA,EACEqB,OAAO,IAAIA,OAAO,CAACb,MADrB,IAAAI,OAAA,CAAAC,GAAA,CAAAC,QAAA,oBAAAC,SAAS,QAEP,oEACE,sDAHK,CAAT,GAAAA,SAAS,OAAT;EAMA,OAAOM,OAAQ,CAACb,MAAhB;AACD","ignoreList":[]},"metadata":{},"sourceType":"module"}